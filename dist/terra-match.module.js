import*as t from"@turf/turf";function e(t,e){var n=t[0],r=e[0],o=n*Math.PI/180,a=r*Math.PI/180,i=(r-n)*Math.PI/180,c=(e[1]-t[1])*Math.PI/180,s=Math.sin(i/2)*Math.sin(i/2)+Math.cos(o)*Math.cos(a)*Math.sin(c/2)*Math.sin(c/2);return 2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6371e3}function n(n,c,s){void 0===s&&(s={});var h=s.distanceMetric,u=void 0===h?e:h,p=s.checkPermutations,y=void 0===p||p,l=s.cleanRedundant,d=void 0===l||l,M=s.decay,f=void 0===M?"exponential":M,v=t.bbox({type:"FeatureCollection",features:[{type:"Feature",geometry:n,properties:{}},{type:"Feature",geometry:c,properties:{}}]});d&&t.cleanCoords(c,{mutate:!0});for(var g=y?i(c):[c],m=[c].concat(g),P=Infinity;m.length>0;){var x=r(n,m.pop(),{distanceMetric:u});x<P&&(P=x)}var I=u([v[0],v[1]],[v[2],v[3]]);return"linear"===f?a(P,I):o(P,I)}function r(t,n,r){void 0===r&&(r={distanceMetric:e});var o=r.distanceMetric,a="Polygon"===t.type?t.coordinates[0]:t.coordinates,i="Polygon"===n.type?n.coordinates[0]:n.coordinates,c=a.length,s=i.length,h=Array.from({length:c},function(){return Array(s).fill(-1)});return function t(e,n){return-1!==h[e][n]||(h[e][n]=0===e&&0===n?o(a[0],i[0]):e>0&&0===n?Math.max(t(e-1,0),o(a[e],i[0])):0===e&&n>0?Math.max(t(0,n-1),o(a[0],i[n])):e>0&&n>0?Math.max(Math.min(t(e-1,n),t(e-1,n-1),t(e,n-1)),o(a[e],i[n])):Infinity),h[e][n]}(c-1,s-1)}function o(t,e){var n=-Math.log(.005)/e;return Math.exp(-n*t)}function a(t,e){return 1-Math.min(t,e)/e}function i(t){if(!t.coordinates||0===t.coordinates.length)return[];for(var e="Polygon"===t.type?t.coordinates[0].slice(0,-1):t.coordinates.slice(0),n=e.length,r=[],o=0;o<n;o++){var a=[].concat(e.slice(o),e.slice(0,o));"Polygon"===t.type&&a.push(a[0]),"LineString"!==t.type&&0===o||r.push({type:t.type,coordinates:"Polygon"===t.type?[a]:a});var i=[].concat(a).reverse();r.push({type:t.type,coordinates:"Polygon"===t.type?[i]:i})}return r}export{o as exponentialDecayFunction,r as frechetDistance,i as generateGeometryCoordinatePermutations,a as linearDecayFunction,n as terraMatch};
//# sourceMappingURL=terra-match.module.js.map
